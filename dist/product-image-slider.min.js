!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function t(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?e(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(n,i,s){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.swiper=new Swiper(n,t(t({simulateTouch:!1,preloadImages:!1},i),{},{breakpoints:t(t({},null==i?void 0:i.breakpoints),{},{100:{simulateTouch:!0}}),navigation:{nextEl:"".concat(n," .btn-slider--next"),prevEl:"".concat(n," .btn-slider--prev"),disabledClass:"btn--disabled"}})),this.thumbNailElements=s,this.listenForSlideChange(),null!=i&&i.lazy&&this.swiper.on("lazyImageReady",(function(){return o.swiper.update()}))}var n,s;return n=e,(s=[{key:"listenForSlideChange",value:function(){this.thumbNailElements&&this.thumbNailElements.length&&this.swiper.on("slideChange",this.thumbToggleActiveItem.bind(this))}},{key:"thumbToggleActiveItem",value:function(){var e=this;this.thumbNailElements.forEach((function(t,n){e.swiper.activeIndex===n?t.classList.add("image-thumbnails__item--active"):t.classList.remove("image-thumbnails__item--active")}))}},{key:"onClickThumbnail",value:function(e){this.swiper.slideTo(e,0)}},{key:"attachThumbnailClickHandler",value:function(){var e=this;this.thumbNailElements.length&&(this.thumbNailElements.forEach((function(t,n){t.addEventListener("click",e.onClickThumbnail.bind(e,n))})),this.thumbToggleActiveItem())}}])&&i(n.prototype,s),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"scale",1),l(this,"maxScale",5),l(this,"holding",!1),l(this,"xCoor",0),l(this,"yCoor",0),l(this,"holdStart",{x:0,y:0}),this.zoomContainer=t,this.zoomInEl=n,this.zoomOutEl=i,this.addListeners()}var t,n;return t=e,(n=[{key:"resetZoom",value:function(){this.scale=1,this.holding=!1,this.xCoor=0,this.yCoor=0,this.holdStart={x:0,y:0},this.transform()}},{key:"addListeners",value:function(){var e=this;this.zoomContainer&&(this.zoomContainer.addEventListener("mousedown",this.onMouseHold.bind(this)),this.zoomContainer.addEventListener("mouseup",this.onMouseUp.bind(this)),this.zoomContainer.addEventListener("mousemove",this.onMouseMove.bind(this)),this.zoomContainer.addEventListener("touchmove",this.onMouseMove.bind(this)),this.zoomContainer.addEventListener("mousewheel",this.onMouseScroll.bind(this)),this.zoomInEl&&this.zoomInEl.addEventListener("click",(function(t){return e.onMouseScroll(t,120)})),this.zoomOutEl&&this.zoomOutEl.addEventListener("click",(function(t){return e.onMouseScroll(t,-120)})))}},{key:"onMouseUp",value:function(){this.holding=!1,this.zoomContainer.classList.remove("zoom-active")}},{key:"onMouseMove",value:function(e){this.preventZoomOut(),e.preventDefault(),!this.holding||this.xCoor>0||this.yCoor>0||1===this.scale||(this.xCoor=e.clientX-this.holdStart.x,this.yCoor=e.clientY-this.holdStart.y,this.transform())}},{key:"animateUI",value:function(){var e=this.scale>1,t=this.scale>=1&&this.scale<this.maxScale;this.zoomInEl&&(this.zoomInEl.disabled=!t),this.zoomOutEl&&(this.zoomOutEl.disabled=!e),this.zoomContainer.classList.toggle("zoomed",e)}},{key:"onMouseHold",value:function(e){e.preventDefault(),this.holdStart.x=e.clientX-this.xCoor,this.holdStart.y=e.clientY-this.yCoor,this.holding=!0,this.zoomContainer.classList.add("zoom-active")}},{key:"limitZoom",value:function(){this.scale>this.maxScale&&(this.scale=this.maxScale)}},{key:"preventZoomOut",value:function(){(this.xCoor>0||this.yCoor>0||this.scale<1)&&(this.yCoor=0,this.xCoor=0,this.scale=1),this.transform()}},{key:"onMouseScroll",value:function(e,t){if(e.preventDefault(),!(this.xCoor>0||this.yCoor>0)){var n,i,s,o,l,r;t?(l=window.innerWidth/2,o=window.innerHeight/2,s=t):(l=e.clientX,o=e.clientY,s=e.wheelDelta?e.wheelDelta:-e.deltaY),r=s>0;var a=Math.abs(s)/100;n=(l-this.xCoor)/this.scale,i=(o-this.yCoor)/this.scale,this.scale>=this.maxScale&&r||(r?this.scale*=a:this.scale/=a,this.limitZoom(),this.xCoor=l-n*this.scale,this.yCoor=o-i*this.scale,this.preventZoomOut())}}},{key:"transform",value:function(){this.animateUI(),this.zoomContainer.style.transform="translate(".concat(this.xCoor,"px, ").concat(this.yCoor,"px) scale(").concat(this.scale,")")}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t){var n=t.screenOpenEl,i=t.screenCloseEl,s=t.mainContainer,o=t.imageContainer,l=t.thumbnails,r=t.thumbnailsContainer,a=t.boundSwiper,c=t.onFullScreenChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"isFullScreen",!1),u(this,"swiper",void 0),this.screenOpenEl=n,this.screenCloseEl=i,this.imageContainer=o,this.mainContainer=s,this.thumbnails=l,this.thumbnailsContainer=r,this.boundSwiper=a,this.onFullScreenChange=c,this.addListeners(),this.initializeThumbnailsSwiper()}var t,n;return t=e,(n=[{key:"initializeThumbnailsSwiper",value:function(){(this.thumbnailsContainer||this.thumbnails)&&(this.swiper=new s(".".concat(this.thumbnailsContainer.className),{direction:"vertical",slidesPerView:4,preloadImages:!0,updateOnImagesReady:!0,mousewheel:!0,simulateTouch:!0}))}},{key:"addListeners",value:function(){var e=this;this.screenOpenEl&&this.screenCloseEl&&(document.addEventListener("fullscreenchange",(function(){document.fullscreenElement||(e.mainContainer.classList.remove("fullscreen--active"),e.isFullScreen=!1,document.documentElement.removeAttribute("style"),e.onFullScreenChange&&e.onFullScreenChange())})),this.screenCloseEl.addEventListener("click",this.toggleVisibility.bind(this)),this.screenOpenEl.addEventListener("click",this.toggleVisibility.bind(this)))}},{key:"toggleVisibility",value:function(){this.isFullScreen?(this.closeFullscreen(),this.isFullScreen=!1):(this.openFullscreen(),this.isFullScreen=!0),this.mainContainer.classList.toggle("fullscreen--active"),this.onFullScreenChange&&this.onFullScreenChange()}},{key:"onChangeImageFromThumbnail",value:function(e){this.boundSwiper.onClickThumbnail(e),this.renderMainViewImage()}},{key:"setLoading",value:function(e,t){if(e){var n=document.querySelector(".fullscreen .loader");n.style.display="flex",e.src=t,e.complete?(n.style.display="none",e.classList.remove("fullscreen__img--loading"),e.onload=null):e.onload=function(){n.style.display="none",e.classList.remove("fullscreen__img--loading"),e.onload=null}}}},{key:"renderThumbnails",value:function(){var e=this;if(this.thumbnailsContainer&&this.thumbnails&&this.thumbnails.length){var t=this.thumbnailsContainer.children[0];t.innerHTML="",this.thumbnails.forEach((function(n,i){var s=document.createElement("div");s.className="fullscreen__thumbnails-item swiper-slide",s.tabIndex=0,s.addEventListener("click",e.onChangeImageFromThumbnail.bind(e,i));var o=new Image;o.src=n.src,o.className="fullscreen__img",o.alt="full-product-thumbnail",s.appendChild(o),t.appendChild(s)})),this.swiper&&this.swiper.swiper.updateSlides()}}},{key:"renderMainViewImage",value:function(){if(this.imageContainer&&this.mainContainer){var e=new Image,t=document.querySelector(".image-thumbnails__item--active");this.imageContainer.children.length&&this.imageContainer.removeChild(this.imageContainer.children[0]),e.className="fullscreen__img fullscreen__img--main fullscreen__img--loading",e.alt="product-full-image";var n=t.children[0].dataset.srcMax;this.setLoading(e,n),this.imageContainer.appendChild(e)}}},{key:"openFullscreen",value:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),document.documentElement.style.overflow="hidden",this.renderMainViewImage(),this.renderThumbnails()}},{key:"closeFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),document.documentElement.removeAttribute("style")}}])&&a(t.prototype,n),e}();document.addEventListener("DOMContentLoaded",(function(){var e=Array.from(document.querySelectorAll(".image-thumbnails__item")),t=new s(".image-preview__images",{slidesPerView:1,lazy:!0},e);t.attachThumbnailClickHandler();var n={screenOpenEl:document.querySelector(".btn-zoom"),mainContainer:document.querySelector(".fullscreen"),screenCloseEl:document.querySelector(".fullscreen__btn-close"),imageContainer:document.querySelector(".fullscreen__figure"),thumbnails:Array.from(document.querySelectorAll(".image-thumbnails__item img")),thumbnailsContainer:document.querySelector(".fullscreen__thumbnails"),boundSwiper:t};new s(".image-thumbnails",{simulateTouch:!0,mousewheel:!0,slidesPerView:5,breakpoints:{200:{slidesPerView:3},420:{slidesPerView:4}}});var i=document.querySelector(".fullscreen__btn-zoom--in"),o=document.querySelector(".fullscreen__btn-zoom--out"),l=new r(n.imageContainer,i,o);n.onFullScreenChange=l.resetZoom.bind(l),new c(n),$(".image-preview__image-item.swiper-slide").easyZoom()}))}();