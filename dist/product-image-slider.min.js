!function(){"use strict";function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i=function(){function i(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"ratio",2),t(this,"image",void 0),t(this,"zoomContainer",void 0),this.container=e,this.ratio=n||this.ratio,this.init()}var n,o;return n=i,(o=[{key:"attachEvents",value:function(){this.container.addEventListener("mousemove",this.onMouseEnter.bind(this)),this.container.addEventListener("touchmove",this.onMouseEnter.bind(this)),this.container.addEventListener("mouseleave",this.onMouseLeave.bind(this)),this.container.addEventListener("touchend",this.onMouseLeave.bind(this))}},{key:"setImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.image.src||this.image.dataset.src;this.zoomContainer.style.backgroundImage="url(".concat(e,")")}},{key:"setSize",value:function(){this.zoomContainer.style.backgroundSize="contain",this.zoomContainer.style.backgroundPosition="center center",this.zoomContainer.style.width="".concat(100*this.ratio,"%"),this.zoomContainer.style.height="".concat(100*this.ratio,"%")}},{key:"init",value:function(){this.container&&(this.attachEvents(),this.image=this.container.querySelector("img"),this.zoomContainer=this.container.querySelector(".image-preview__zoom"),this.setImage(),this.setSize())}},{key:"getCursorPosition",value:function(e){e=e||window.event;var t=this.image.getBoundingClientRect(),i=e.pageX-t.left,n=e.pageY-t.top;return{mouseX:i-=window.pageXOffset,mouseY:n-=window.pageYOffset}}},{key:"onMouseEnter",value:function(e){e.preventDefault(),this.zoomContainer.classList.add("image-preview__zoom--active"),this.image.classList.add("image-preview__image--hide");var t=this.getCursorPosition(e),i=t.mouseX,n=t.mouseY;console.log(parseInt(i),parseInt(n));var o=i,r=n;o>this.container.offsetWidth&&(o=this.container.offsetWidth),r>this.container.offsetHeight&&(r=this.container.offsetHeight),o<0&&(o=0),r<0&&(r=0),this.zoomContainer.style.left="-".concat(o,"px"),this.zoomContainer.style.top="-".concat(r,"px")}},{key:"onMouseLeave",value:function(){this.zoomContainer.style.removeProperty("top"),this.zoomContainer.style.removeProperty("left"),this.image.classList.remove("image-preview__image--hide"),this.zoomContainer.classList.remove("image-preview__zoom--active")}}])&&e(n.prototype,o),i}();function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"slidesImageZoom",[]),this.container=t,this.swiper=new Swiper(t,o(o({simulateTouch:!1,preloadImages:!1},i),{},{breakpoints:o(o({},null==i?void 0:i.breakpoints),{},{100:{simulateTouch:!0}}),updateOnImagesReady:!0,navigation:{nextEl:"".concat(t," .btn-slider--next"),prevEl:"".concat(t," .btn-slider--prev"),disabledClass:"btn--disabled"}})),this.swiper.on("lazyImageReady",(function(){return n.swiper.update()}))}var t,n,a;return t=e,a=[{key:"attachChangeHandler",value:function(e,t){e.on("slideChange",(function(){return t.thumbToggleActiveItem(e.activeIndex)}))}}],(n=[{key:"renderSlides",value:function(e){var t=e.map((function(e){return'\n        <div class="swiper-slide image-preview__image-item">\n          <div class="image-preview__zoom"></div>\n          <img\n            width="100%"\n            height="100%"\n            data-src="'.concat(e.normal,'" \n            alt="product-image"\n            class="swiper-lazy image-preview__image">\n          <div class="loader">\n            <div class="loader__spinner"></div>\n          </div>\n        </div>\n      ')}));this.swiper.appendSlide(t),this.swiper.lazy.load(),this.enableZoom()}},{key:"enableZoom",value:function(){var e=this;this.swiper.slides.forEach((function(t){e.slidesImageZoom.push(new i(t))}))}},{key:"renderThumbanails",value:function(e){if(e.length){var t=e.map((function(e){return'\n        <div class="image-thumbnails__item swiper-slide" tabindex="0">\n          <img\n            height="100%"\n            width="100%"\n            data-src-max="'.concat(e.max,'"\n            src="').concat(e.normal,'" \n            alt="product-thumbnail">\n        </div>\n      ')}));this.swiper.appendSlide(t),this.swiper.lazy.load()}}},{key:"thumbToggleActiveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.swiper.active;this.swiper.slides.forEach((function(t,i){e===i?t.classList.add("image-thumbnails__item--active"):t.classList.remove("image-thumbnails__item--active")}))}},{key:"onClickThumbnail",value:function(e,t){e.slideTo(t,300),this.thumbToggleActiveItem(t)}},{key:"attachThumbnailClickHandler",value:function(e){var t=this;this.swiper.slides.length&&(this.swiper.slides.forEach((function(i,n){i.addEventListener("click",t.onClickThumbnail.bind(t,e,n))})),this.thumbToggleActiveItem(e.activeIndex))}}])&&r(t.prototype,n),a&&r(t,a),e}();function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"scale",1),c(this,"maxScale",5),c(this,"holding",!1),c(this,"xCoor",0),c(this,"yCoor",0),c(this,"holdStart",{x:0,y:0}),this.zoomContainer=t,this.zoomInEl=i,this.zoomOutEl=n,this.addListeners()}var t,i;return t=e,(i=[{key:"resetZoom",value:function(){this.scale=1,this.holding=!1,this.xCoor=0,this.yCoor=0,this.holdStart={x:0,y:0},this.transform()}},{key:"addListeners",value:function(){var e=this;this.zoomContainer&&(this.zoomContainer.addEventListener("mousedown",this.onMouseHold.bind(this)),this.zoomContainer.addEventListener("mouseup",this.onMouseUp.bind(this)),this.zoomContainer.addEventListener("mousemove",this.onMouseMove.bind(this)),this.zoomContainer.addEventListener("touchmove",this.onMouseMove.bind(this)),this.zoomContainer.addEventListener("mousewheel",this.onMouseScroll.bind(this)),this.zoomInEl&&this.zoomInEl.addEventListener("click",(function(t){return e.onMouseScroll(t,120)})),this.zoomOutEl&&this.zoomOutEl.addEventListener("click",(function(t){return e.onMouseScroll(t,-120)})))}},{key:"onMouseUp",value:function(){this.holding=!1,this.zoomContainer.classList.remove("zoom-active")}},{key:"onMouseMove",value:function(e){this.preventZoomOut(),e.preventDefault(),!this.holding||this.xCoor>0||this.yCoor>0||1===this.scale||(this.xCoor=e.clientX-this.holdStart.x,this.yCoor=e.clientY-this.holdStart.y,this.transform())}},{key:"animateUI",value:function(){var e=this.scale>1,t=this.scale>=1&&this.scale<this.maxScale;this.zoomInEl&&(this.zoomInEl.disabled=!t),this.zoomOutEl&&(this.zoomOutEl.disabled=!e),this.zoomContainer.classList.toggle("zoomed",e)}},{key:"onMouseHold",value:function(e){e.preventDefault(),this.holdStart.x=e.clientX-this.xCoor,this.holdStart.y=e.clientY-this.yCoor,this.holding=!0,this.zoomContainer.classList.add("zoom-active")}},{key:"limitZoom",value:function(){this.scale>this.maxScale&&(this.scale=this.maxScale)}},{key:"preventZoomOut",value:function(){(this.xCoor>0||this.yCoor>0||this.scale<1)&&(this.yCoor=0,this.xCoor=0,this.scale=1),this.transform()}},{key:"onMouseScroll",value:function(e,t){if(e.preventDefault(),!(this.xCoor>0||this.yCoor>0)){var i,n,o,r,s,a;t?(s=window.innerWidth/2,r=window.innerHeight/2,o=t):(s=e.clientX,r=e.clientY,o=e.wheelDelta?e.wheelDelta:-e.deltaY),a=o>0;var l=Math.abs(o)/100;i=(s-this.xCoor)/this.scale,n=(r-this.yCoor)/this.scale,this.scale>=this.maxScale&&a||(a?this.scale*=l:this.scale/=l,this.limitZoom(),this.xCoor=s-i*this.scale,this.yCoor=r-n*this.scale,this.preventZoomOut())}}},{key:"transform",value:function(){this.animateUI(),this.zoomContainer.style.transform="translate(".concat(this.xCoor,"px, ").concat(this.yCoor,"px) scale(").concat(this.scale,")")}}])&&l(t.prototype,i),e}();function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=function(){function e(t){var i=t.screenOpenEl,n=t.screenCloseEl,o=t.mainContainer,r=t.imageContainer,s=t.thumbnails,a=t.thumbnailsContainer,l=t.boundSwiperMain,c=t.boundSwiperThumbnails,u=t.onFullScreenChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"isFullScreen",!1),m(this,"swiper",void 0),this.screenOpenEl=i,this.screenCloseEl=n,this.imageContainer=r,this.mainContainer=o,this.thumbnails=s,this.thumbnailsContainer=a,this.boundSwiperMain=l,this.boundSwiperThumbnails=c,this.onFullScreenChange=u,this.addListeners(),this.initializeThumbnailsSwiper()}var t,i;return t=e,(i=[{key:"initializeThumbnailsSwiper",value:function(){(this.thumbnailsContainer||this.thumbnails)&&(this.swiper=new a(".".concat(this.thumbnailsContainer.className),{direction:"vertical",slidesPerView:4,preloadImages:!0,updateOnImagesReady:!0,mousewheel:!0,simulateTouch:!0}))}},{key:"addListeners",value:function(){var e=this;this.screenOpenEl&&this.screenCloseEl&&(document.addEventListener("fullscreenchange",(function(){document.fullscreenElement||(e.mainContainer.classList.remove("fullscreen--active"),e.isFullScreen=!1,document.documentElement.removeAttribute("style"),e.onFullScreenChange&&e.onFullScreenChange())})),this.screenCloseEl.addEventListener("click",this.toggleVisibility.bind(this)),this.screenOpenEl.addEventListener("click",this.toggleVisibility.bind(this)))}},{key:"toggleVisibility",value:function(){this.isFullScreen?(this.closeFullscreen(),this.isFullScreen=!1):(this.openFullscreen(),this.isFullScreen=!0),this.mainContainer.classList.toggle("fullscreen--active"),this.onFullScreenChange&&this.onFullScreenChange()}},{key:"onChangeImageFromThumbnail",value:function(e){this.boundSwiperMain.swiper.slideTo(e,0),this.renderMainViewImage()}},{key:"setLoading",value:function(e,t){if(e){var i=document.querySelector(".fullscreen .loader");i.style.display="flex",e.src=t,e.complete?n():e.onload=function(){return n()}}function n(){i.style.display="none",e.classList.remove("fullscreen__img--loading"),e.onload=null}}},{key:"renderThumbnails",value:function(){var e=this;if(this.thumbnailsContainer&&this.thumbnails&&this.thumbnails.length){var t=this.thumbnailsContainer.children[0];t.innerHTML="",this.thumbnails.forEach((function(i,n){var o=document.createElement("div");o.className="fullscreen__thumbnails-item swiper-slide",o.tabIndex=0,o.addEventListener("click",e.onChangeImageFromThumbnail.bind(e,n));var r=new Image;r.src=i.src,r.className="fullscreen__img",r.alt="full-product-thumbnail",o.appendChild(r),t.appendChild(o)})),this.swiper&&this.swiper.swiper.update()}}},{key:"renderMainViewImage",value:function(){if(this.imageContainer&&this.mainContainer){var e=new Image,t=document.querySelector(".image-thumbnails__item--active");this.imageContainer.children.length&&this.imageContainer.removeChild(this.imageContainer.children[0]),e.className="fullscreen__img fullscreen__img--main fullscreen__img--loading",e.alt="product-full-image";var i=t.children[0].dataset.srcMax;this.setLoading(e,i),this.imageContainer.appendChild(e)}}},{key:"openFullscreen",value:function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),document.documentElement.style.overflow="hidden",this.renderMainViewImage(),this.renderThumbnails()}},{key:"closeFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),document.documentElement.removeAttribute("style")}}])&&h(t.prototype,i),e}();function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(t){var i=t.variants,n=t.sizeVariants,o=t.boundSwiperMain,r=t.boundSwiperThumbnails,s=t.colorVariants,a=t.colorsContainer,l=t.sizesContainer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.colorsContainer=a,this.sizesContainer=l,this.variants=i,this.sizeVariants=n,this.colorVariants=s,this.boundSwiperThumbnails=r,this.boundSwiperMain=o,this.renderColorOptions(),this.sizeVariants&&this.sizeVariants.length&&this.renderSizeOptions()}var t,i;return t=e,(i=[{key:"renderSizeOptions",value:function(){}},{key:"animateUI",value:function(e){Array.from(this.colorsContainer.querySelectorAll("[data-color]")).forEach((function(t){e===t.dataset.color?t.classList.add("active"):t.classList.remove("active")}))}},{key:"renderColorOptions",value:function(){var e,t,i=this;if(this.colorVariants){for(var n=0,o=Object.entries(this.colorVariants);n<o.length;n++){var r=(e=o[n],t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r=[],s=!0,a=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==i.return||i.return()}finally{if(a)throw o}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=r[0],a=r[1],l='\n        <div class="color" data-color='.concat(s,'>\n          <div>\n            <div class="color-circle ').concat(s,'"></div>\n          </div>\n          <div class="color-tooltip">\n            ').concat(a.title.toUpperCase(),'\n            <div class="color-arrow">\n              <i class="color-caret"></i>\n            </div>\n          </div>\n        </div>\n      ');this.colorsContainer.insertAdjacentHTML("afterbegin",l)}Array.from(this.colorsContainer.querySelectorAll("[data-color]")).forEach((function(e){var t=e.dataset.color,n=i.colorVariants[t];e.addEventListener("click",(function(){return i.onSelectByColor(n,t)}))}))}}},{key:"onSelectByColor",value:function(e,t){var i=this.boundSwiperMain.swiper,n=this.boundSwiperThumbnails.swiper,o=e.image,r=o.normal,s=o.small,a=o.max;i.slideTo(i.slides.length,700),this.boundSwiperThumbnails.thumbToggleActiveItem(i.activeIndex);var l=i.slides[i.slides.length-1].querySelector("img"),c=this.boundSwiperMain.slidesImageZoom[i.slides.length-1];""===l.src?l.dataset.src=r:l.setAttribute("src",r),c.setImage(r),c.setSize(),i.lazy.load();var u=n.slides[n.slides.length-1].querySelector("img");u.setAttribute("src",s),u.dataset.srcMax=a,this.animateUI(t),i.update()}}])&&f(t.prototype,i),e}();document.addEventListener("DOMContentLoaded",(function(){var e=new a(".image-preview__images",{slidesPerView:1,lazy:!0});e.renderSlides(window.images);var t=new a(".image-thumbnails",{simulateTouch:!0,mousewheel:!0,slidesPerView:5,breakpoints:{200:{slidesPerView:3},420:{slidesPerView:4}}});t.renderThumbanails(window.images),t.attachThumbnailClickHandler(e.swiper),a.attachChangeHandler(e.swiper,t);var i={screenOpenEl:document.querySelector(".btn-zoom"),mainContainer:document.querySelector(".fullscreen"),screenCloseEl:document.querySelector(".fullscreen__btn-close"),imageContainer:document.querySelector(".fullscreen__figure"),thumbnails:Array.from(document.querySelectorAll(".image-thumbnails__item img")),thumbnailsContainer:document.querySelector(".fullscreen__thumbnails"),boundSwiperMain:e,boundSwiperThumbnails:t},n=document.querySelector(".fullscreen__btn-zoom--in"),o=document.querySelector(".fullscreen__btn-zoom--out"),r=new u(i.imageContainer,n,o);i.onFullScreenChange=r.resetZoom.bind(r),new d(i),new b({colorsContainer:document.querySelector(".color-filter-container .container"),sizesContainer:document.querySelector(".size-tabs-container .sizes"),variants:window.variants,sizeVariants:window.sizes,colorVariants:window.colors,boundSwiperMain:e,boundSwiperThumbnails:t})}))}();